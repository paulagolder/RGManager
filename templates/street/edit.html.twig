{# views/street/edit.html.twig #}

{% extends 'master.html.twig' %}


{% block stylesheets %}
      {{ parent() }}
   <link href="{{ asset('/css/street.css') }}" rel="stylesheet" />
  <link
    rel="stylesheet"
    href="https://unpkg.com/leaflet@1.6.0/dist/leaflet.css"
/>
{% endblock %}
{% block js %}
 {{ parent() }}
   <script src="{{asset('js/maps.js')}}"></script>
   <script
    src="https://unpkg.com/leaflet@1.6.0/dist/leaflet.js"
></script>
<script>
   var popup = L.popup();
    function onMapClick(e) {
       popup
        .setLatLng(e.latlng)
        .setContent("You clicked the map at " + e.latlng.toString())
        .openOn(mymap);

        lat = e.latlng.lat;
        lng = e.latlng.lng;
      document.getElementById("street_form_Latitude").value=lat;
      document.getElementById("street_form_Longitude").value=lng;
     }
   </script>
{% endblock %}


{% block middle %}
<div id="middle" >
<div id="streetedit"  >
<div>
 <div class="heading  row" >
 <div class="label">Edit Street:</div>
 <div class="value" > {{street.name}}</div>
 {% if streetcount > 1 %}
 <div class="countwarning"> Multiple appearances of this street</div>
 <div class="button> "><a class="button small" href = "/street/editgroup/{{street.name}}"" >{{'Edit Group'}} </a> </div>
 {% endif %}
 <div class="button  right"> <a class="button" href = {{back}} >Back</a> </div>
</div>
<div class="formmap">
<div  class="form" >
    {{ form_start(form) }}
    {{ form_row(form.name) }}
      {{ form_row(form.Part) }}
        {{ form_row(form.Qualifier) }}
    {{ form_row(form.PD) }}
    {{ form_row(form.RoadGroupId) }}
    {{ form_row(form.WardId) }}
    {{ form_row(form.SubwardId) }}
    {{ form_row(form.Households) }}
    {{ form_row(form.Electors) }}
    {{ form_row(form.Latitude) }}
    {{ form_row(form.Longitude) }}
    <button type="submit">{{'Register!'}}</button>
</div>

 <div class="map" >
      <div id="mapid"></div>
 </div>
 </div>
  </div>
<div  class="xform" >
        {{ form_row(form.Note) }}
    {{ form_end(form) }}
    </div>
      <div class ="row">
     <div class="deletebutton right "> <a class="button  red" href ="/street/deleterg/{{street.streetid}}" >{{'DELETE ROAD'}} </a> </div>
     </div>
     </div>
         {% set jslocation = street.getjson() %}
      <script  type="text/javascript" >
       var mymap = myMapper4("{{jslocation}}");
         mymap.on('click', onMapClick);
      </script>
</div>
</div>
</div>
{% endblock %}
